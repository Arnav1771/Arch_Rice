# ==========================================================
# HYPRLAND KEQING EDITION - FINAL
# ==========================================================

# --- NVIDIA & Environment ---
env = LIBVA_DRIVER_NAME,nvidia
env = XDG_SESSION_TYPE,wayland
env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = CURSOR_RESOURCES,nvidia
env = WLR_NO_HARDWARE_CURSORS,1

# --- Variables ---
$mainMod = SUPER
$terminal = kitty
$menu = ~/.config/hypr/scripts/theme-switcher.sh
$fileManager = dolphin # Change this to thunar or nautilus if needed
$Code = code
$browser = firefox
$gaming = discord
$obsidian = obsidian
$obs = obs

# --- Startup ---
exec-once = swww-daemon
exec-once = swww img ~/.config/hypr/wallpapers/Keqing1.jpg
exec-once = waybar
exec-once = hypridle
exec-once = wl-paste --type text --watch cliphist store
exec-once = ~/.local/bin/pypr

# --- Monitor ---
monitor=,preferred,auto,1

# --- General Appearance ---
general {
    gaps_in = 5
    gaps_out = 15
    border_size = 2
    col.active_border = rgba(ca9ee6ff) rgba(7359a5ff) 45deg
    col.inactive_border = rgba(232634aa)
    layout = dwindle
}

# --- Input (tweak to taste) ---
input {
    kb_layout = uk
    follow_mouse = 1
    repeat_rate = 40
    repeat_delay = 300
    accel_profile = flat
    sensitivity = 0
    touchpad {
        natural_scroll = true
        tap-to-click = true
    }
}

# --- Dwindle Layout Tweaks ---
dwindle {
    pseudotile = true
    preserve_split = true
    smart_split = true
    smart_resizing = true
}

# # Each rule must be separate
# layerrule = blur, wlogout
# layerrule = ignorezero, wlogout
# layerrule = ignorealpha 0.5, wlogout

# --- Decoration ---
decoration {
    rounding = 12
    active_opacity = 1.0
    inactive_opacity = 0.92
    shadow {
        enabled = true
        range = 20
        render_power = 3
        color = rgba(115, 89, 165, 0.6) 
    }
    blur {
        enabled = true
        size = 6
        passes = 3
        vibrancy = 0.2
    }
}

# --- Animations ---
animations {
    enabled = true
    bezier = keqing_snap, 0.05, 0.9, 0.1, 1.05
    bezier = easeOutExpo, 0.16, 1, 0.3, 1
    animation = windows, 1, 3, keqing_snap, popin 80%
    animation = workspaces, 1, 4, easeOutExpo, slide
}

# --- Rules ---
# Common floaters and dialogs
windowrule = float on, match:class ^(pavucontrol)$
windowrule = float on, match:class ^(blueman-manager)$
windowrule = float on, match:class ^(nm-connection-editor)$
windowrule = float on, match:title ^(Open File)$
windowrule = float on, match:title ^(Save File)$

# Optional: enable blur on waybar layer (comment out if slow)
# layerrule = blur on, match:namespace waybar

# --- Keybinds ---
bind = $mainMod, Return, exec, $terminal
bind = $mainMod, Q, killactive
bind = $mainMod, T, exec, $menu
bind = $mainMod, L, exec, hyprlock
bind = $mainMod, E, exec, $fileManager
bind = $mainMod, F, togglefloating
bind = $mainMod , C,exec, $Code
bind = $mainMod, D, exec, $gaming
bind = $mainMod, B, exec, $browser
bind = $mainMod, O, exec, $obsidian
bind = $mainMod SHIFT, O, exec, $obs


bind = $mainMod SHIFT, W, exec, wallpaper=$(find ~/.config/hypr/wallpapers -type f | shuf -n 1) && swww img "$wallpaper" --transition-type grow --transition-pos cursor --transition-duration 1.5 && wal -i "$wallpaper" && killall -SIGUSR2 waybar
# ASUS TUF Function Keys


bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 5%+
bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = , XF86MonBrightnessUp, exec, brightnessctl set 5%+
bindel = , XF86MonBrightnessDown, exec, brightnessctl set 5%-

# Workspaces (with random epic transitions)
bind = $mainMod, 1, exec, ~/.config/hypr/scripts/workspace-switch.sh 1
bind = $mainMod, 2, exec, ~/.config/hypr/scripts/workspace-switch.sh 2
bind = $mainMod, 3, exec, ~/.config/hypr/scripts/workspace-switch.sh 3
bind = $mainMod, 4, exec, ~/.config/hypr/scripts/workspace-switch.sh 4
bind = $mainMod, 5, exec, ~/.config/hypr/scripts/workspace-switch.sh 5
bind = $mainMod, 6, exec, ~/.config/hypr/scripts/workspace-switch.sh 6
bind = $mainMod, 7, exec, ~/.config/hypr/scripts/workspace-switch.sh 7
bind = $mainMod, 8, exec, ~/.config/hypr/scripts/workspace-switch.sh 8
bind = $mainMod, 9, exec, ~/.config/hypr/scripts/workspace-switch.sh 9
bind = $mainMod, 0, exec, ~/.config/hypr/scripts/workspace-switch.sh 10

# Move windows to workspaces
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Focus windows (arrow keys)
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# Move windows (arrow keys)
bind = $mainMod SHIFT, left, movewindow, l
bind = $mainMod SHIFT, right, movewindow, r
bind = $mainMod SHIFT, up, movewindow, u
bind = $mainMod SHIFT, down, movewindow, d

# Resize active window (arrow keys)
bind = $mainMod CTRL, left, resizeactive, -30 0
bind = $mainMod CTRL, right, resizeactive, 30 0
bind = $mainMod CTRL, up, resizeactive, 0 -30
bind = $mainMod CTRL, down, resizeactive, 0 30

# Layout controls
bind = $mainMod, S, togglesplit
bind = $mainMod, P, pseudo
bind = $mainMod, M, fullscreen, 1

# Session controls
bind = $mainMod SHIFT, Q, exit

# Mouse bindings
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow